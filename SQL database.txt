-- Create subjects table without AUTO_INCREMENT
CREATE TABLE IF NOT EXISTS subjects(
    subjid INT NOT NULL,
    subjcode TEXT NULL DEFAULT NULL,
    subjdesc TEXT NULL DEFAULT NULL,
    subjunits INT NULL DEFAULT NULL,
    subjsched TEXT NULL,
    PRIMARY KEY (subjid)
);

-- Create teachers table without AUTO_INCREMENT
CREATE TABLE IF NOT EXISTS teachers(
    tid INT NOT NULL,
    tname TEXT NULL DEFAULT NULL,
    tdept TEXT NULL DEFAULT NULL,
    tadd TEXT NULL,
    tcontact TEXT NULL,
    tstatus TEXT NULL,
    PRIMARY KEY (tid)
);

-- Create assign table with foreign keys
CREATE TABLE IF NOT EXISTS assign(
    SubjID INT NOT NULL UNIQUE,
    TID INT NOT NULL,
    FOREIGN KEY (SubjID) REFERENCES subjects(subjid),
    FOREIGN KEY (TID) REFERENCES teachers(tid)
);

-- Create students table without AUTO_INCREMENT
CREATE TABLE IF NOT EXISTS students(
    studid INT NOT NULL,
    studname TEXT NOT NULL,
    studadd TEXT NULL,
    studcrs TEXT NULL,
    studgender TEXT NULL,
    yrlvl TEXT NULL,
    PRIMARY KEY (studid)
);

-- Create enroll table with AUTO_INCREMENT
CREATE TABLE IF NOT EXISTS enroll(
    eid INT NOT NULL AUTO_INCREMENT,
    studid INT NULL DEFAULT NULL,
    subjid INT NULL DEFAULT NULL,
    evaluation TEXT DEFAULT NULL,
    PRIMARY KEY (eid),
    UNIQUE (studid, subjid),
    FOREIGN KEY (studid) REFERENCES students(studid),
    FOREIGN KEY (subjid) REFERENCES subjects(subjid)
);

-- Create grades table with AUTO_INCREMENT
CREATE TABLE IF NOT EXISTS grades(
    gradeid INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    enroll_eid INT UNIQUE NOT NULL,
    prelim TEXT NULL DEFAULT NULL,
    midterm TEXT NULL DEFAULT NULL,
    prefinal TEXT NULL DEFAULT NULL,
    final TEXT NULL DEFAULT NULL,
    FOREIGN KEY (enroll_eid) REFERENCES enroll(eid)
);
